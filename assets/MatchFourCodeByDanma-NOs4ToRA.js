var m=(o,e,a)=>new Promise((i,l)=>{var n=d=>{try{r(a.next(d))}catch(f){l(f)}},s=d=>{try{r(a.throw(d))}catch(f){l(f)}},r=d=>d.done?i(d.value):Promise.resolve(d.value).then(n,s);r((a=a.apply(o,e)).next())});import{l as g}from"./utils-DS-Dv-fG.js";import{c,a as t,b as y,p as R,v as k,u as S,F as v,q as b,t as u,f as _,o as h,e as T,x as N,n as D}from"./vendor-DNlG_nFR.js";import{_ as K}from"./index-Tfco53-f.js";const G=g.createInstance({name:"number-prediction-db",storeName:"extraction-records"}),w=g.createInstance({name:"number-prediction-db",storeName:"four-code-maintenance"}),M=g.createInstance({name:"number-prediction-db",storeName:"kill-code-maintenance"}),U=g.createInstance({name:"numberPrediction",storeName:"fiveCodeMaintenance"}),F=g.createInstance({name:"number-prediction-db",storeName:"user-inputs"}),I=g.createInstance({name:"number-prediction-db",storeName:"code-maintenance"}),x={name:"MatchFourCodeByDanma",data(){return{period:"",fourCodeGroups:[{code:""}],killCodeGroups:[{code:""}],results:[],showHistoryModal:!1,historyRecords:[],availablePeriods:[],selectedPeriod:"",maintenanceRecords:[],availableKillPeriods:[],selectedKillPeriod:"",killMaintenanceRecords:[],availableFivePeriods:[],selectedFivePeriod:"",fiveMaintenanceRecords:[],fiveCodeGroups:[{code:""}],availableCombinedPeriods:[],selectedCombinedPeriod:"",saveInterval:null,threeCodeCombinations:[],showThreeCodeResults:!1,fullMatchThreeCodeCombinations:[],partialMatchThreeCodeCombinations:[],fullMatchFiveCodeCombinations:[],partialMatchFiveCodeCombinations:[],showFiveCodeResults:!1,danmaGroups:[{code:""}],danmaTypes:[{value:"twoCode",label:"两胆码"},{value:"threeCode",label:"三胆码"},{value:"fourCode",label:"四胆码"},{value:"fiveCode",label:"五胆码"}],selectedDanmaTypes:["twoCode","threeCode","fourCode","fiveCode"],finalResult:""}},watch:{selectedDanmaTypes:{handler(o,e){console.log("胆码类型选择变化:",{oldVal:e,newVal:o}),this.selectedCombinedPeriod&&(console.log("重新加载胆码数据，期号:",this.selectedCombinedPeriod),this.loadDanmaFromMaintenance(this.selectedCombinedPeriod))},deep:!0}},mounted(){return m(this,null,function*(){yield this.loadUserInput(),yield this.loadMaintenanceRecords(),yield this.loadKillMaintenanceRecords(),yield this.loadFiveMaintenanceRecords(),yield this.loadCodeMaintenanceRecords(),this.saveInterval=setInterval(()=>{this.saveUserInput()},3e4),console.log("从localforage加载的期号数据:",{四码组合期号数量:this.availablePeriods.length,四码组合期号列表:this.availablePeriods,杀码组合期号数量:this.availableKillPeriods.length,杀码组合期号列表:this.availableKillPeriods,五胆码组合期号数量:this.availableFivePeriods.length,五胆码组合期号列表:this.availableFivePeriods}),this.availablePeriods.length===0&&this.availableKillPeriods.length===0&&this.availableFivePeriods.length===0?(console.log("提示: 没有从localforage找到四码、杀码或五胆码的实际数据"),console.log("胆码组合数据将从胆码维护列表实时获取")):(console.log("已成功从localforage加载实际期号数据"),console.log("实际数据摘要:",{四码组合记录数:this.maintenanceRecords.length,杀码组合记录数:this.killMaintenanceRecords.length,五胆码组合记录数:this.fiveMaintenanceRecords.length})),this.combineAllPeriods()})},methods:{combineAllPeriods(){console.log("四码组合期号数量:",this.availablePeriods.length),console.log("四码组合期号列表:",this.availablePeriods),console.log("杀码组合期号数量:",this.availableKillPeriods.length),console.log("杀码组合期号列表:",this.availableKillPeriods),console.log("五胆码组合期号数量:",this.availableFivePeriods.length),console.log("五胆码组合期号列表:",this.availableFivePeriods);const o=[...this.availablePeriods,...this.availableKillPeriods,...this.availableFivePeriods],e=[...new Set(o)];this.availableCombinedPeriods=e.sort((a,i)=>i.localeCompare(a)),console.log("合并后的期号列表:",this.availableCombinedPeriods),this.$forceUpdate()},beforeDestroy(){return m(this,null,function*(){this.saveInterval&&clearInterval(this.saveInterval),yield this.saveUserInput()})},saveUserInput(){return m(this,null,function*(){try{const o={period:this.period,fourCodeGroups:this.fourCodeGroups,killCodeGroups:this.killCodeGroups,fiveCodeGroups:this.fiveCodeGroups,danmaGroups:this.danmaGroups,selectedDanmaTypes:this.selectedDanmaTypes,timestamp:Date.now()},e=JSON.parse(JSON.stringify(o));yield F.setItem("lastUserInput",e),console.log("用户输入已保存")}catch(o){console.error("保存用户输入失败:",o)}})},loadUserInput(){return m(this,null,function*(){try{const o=yield F.getItem("lastUserInput");if(o){const e=Date.now()-6048e5;o.timestamp>e?(this.period=o.period||"",this.fourCodeGroups=o.fourCodeGroups&&o.fourCodeGroups.length>0?o.fourCodeGroups:[{code:""}],this.killCodeGroups=o.killCodeGroups&&o.killCodeGroups.length>0?o.killCodeGroups:[{code:""}],this.fiveCodeGroups=o.fiveCodeGroups&&o.fiveCodeGroups.length>0?o.fiveCodeGroups:[{code:""}],this.danmaGroups=o.danmaGroups&&o.danmaGroups.length>0?o.danmaGroups:[{code:""}],this.selectedDanmaTypes=o.selectedDanmaTypes&&o.selectedDanmaTypes.length>0?o.selectedDanmaTypes:["twoCode","threeCode","fourCode","fiveCode"],console.log("已加载上次保存的用户输入")):console.log("保存的用户输入已过期")}}catch(o){console.error("加载用户输入失败:",o)}})},addTestData(){console.log("没有找到实际数据，模拟加载测试数据");const o=[{id:"1",period:"2024001",fourCode:"1234",priority:1,timestamp:Date.now()},{id:"2",period:"2024002",fourCode:"5678",priority:1,timestamp:Date.now()}],e=[{id:"3",period:"2024001",killCode:"90",priority:1,timestamp:Date.now()}],a=[{id:"4",period:"2024002",fiveCode:"13579",priority:1,createdAt:Date.now()}];this.maintenanceRecords=o,this.killMaintenanceRecords=e,this.fiveMaintenanceRecords=a,this.availablePeriods=[...new Set(o.map(i=>i.period))].sort((i,l)=>l.localeCompare(i)),this.availableKillPeriods=[...new Set(e.map(i=>i.period))].sort((i,l)=>l.localeCompare(i)),this.availableFivePeriods=[...new Set(a.map(i=>i.period))].sort((i,l)=>l.localeCompare(i)),console.log("已添加模拟测试数据：",{availablePeriods:this.availablePeriods,availableKillPeriods:this.availableKillPeriods,availableFivePeriods:this.availableFivePeriods})},onCombinedPeriodSelect(){this.selectedCombinedPeriod&&(this.period=this.selectedCombinedPeriod,this.selectedPeriod=this.selectedCombinedPeriod,this.selectedKillPeriod=this.selectedCombinedPeriod,this.selectedFivePeriod=this.selectedCombinedPeriod,this.loadCombinedPeriodData())},loadDanmaFromMaintenance(o){return m(this,null,function*(){try{const e=(yield I.getItem("codeRecords"))||[];console.log("从胆码维护存储加载的数据:",e);const a={twoCode:"two",threeCode:"three",fourCode:"four",fiveCode:"five"},i=e.filter(l=>{const n=this.selectedDanmaTypes.map(s=>a[s]||s);return l.period===o&&n.includes(l.codeType)});console.log("过滤后的胆码记录:",i),i.length>0?(this.danmaGroups=[],i.forEach(l=>{this.danmaGroups.push({code:l.code})}),console.log("获取胆码组合数据:",this.danmaGroups)):(console.log("未找到匹配的胆码数据，请确保胆码维护页面有对应期号和类型的数据"),this.danmaGroups=[{code:""}])}catch(e){console.error("从胆码维护列表加载数据失败:",e)}})},loadCombinedPeriodData(){const o=this.maintenanceRecords.filter(i=>i.period===this.selectedCombinedPeriod).sort((i,l)=>i.priority-l.priority);o.length>0&&(this.fourCodeGroups=[],o.forEach(i=>{this.fourCodeGroups.push({code:i.fourCode})}));const e=this.killMaintenanceRecords.filter(i=>i.period===this.selectedCombinedPeriod).sort((i,l)=>i.priority-l.priority);e.length>0&&(this.killCodeGroups=[],e.forEach(i=>{this.killCodeGroups.push({code:i.killCode})}));const a=this.fiveMaintenanceRecords.filter(i=>i.period===this.selectedCombinedPeriod).sort((i,l)=>i.priority-l.priority);a.length>0&&(this.fiveCodeGroups=[],a.forEach(i=>{this.fiveCodeGroups.push({code:i.fiveCode})})),this.loadDanmaFromMaintenance(this.selectedCombinedPeriod)},addDanmaGroup(){this.danmaGroups.push({code:""})},removeDanmaGroup(o){this.danmaGroups.length>1?this.danmaGroups.splice(o,1):alert("至少保留一组胆码组合")},validateDanmaInput(o){o.code=o.code.replace(/[^0-9]/g,"")},addFourCodeGroup(){this.fourCodeGroups.push({code:""})},removeFourCodeGroup(o){this.fourCodeGroups.length>1?this.fourCodeGroups.splice(o,1):alert("至少保留一组四码组合")},addKillCodeGroup(){this.killCodeGroups.push({code:""})},removeKillCodeGroup(o){this.killCodeGroups.length>1?this.killCodeGroups.splice(o,1):alert("至少保留一组杀码组合")},addFiveCodeGroup(){this.fiveCodeGroups.push({code:""})},removeFiveCodeGroup(o){this.fiveCodeGroups.length>1?this.fiveCodeGroups.splice(o,1):alert("至少保留一组五胆码组合")},validateFiveCodeInput(o){o.code=o.code.replace(/[^0-9]/g,"").slice(0,5)},validateFourCodeInput(o){o.code=o.code.replace(/[^0-9]/g,"").slice(0,4)},validateKillCodeInput(o){o.code=o.code.replace(/[^0-9]/g,"")},loadMaintenanceRecords(){return m(this,null,function*(){try{this.maintenanceRecords=[];const e=(yield w.keys()).map(i=>m(this,null,function*(){const l=yield w.getItem(i);l&&this.maintenanceRecords.push(l)}));yield Promise.all(e);const a=[...new Set(this.maintenanceRecords.map(i=>i.period))];this.availablePeriods=a.sort((i,l)=>l.localeCompare(i))}catch(o){console.error("加载四码组合维护记录失败:",o)}})},loadKillMaintenanceRecords(){return m(this,null,function*(){try{this.killMaintenanceRecords=[];const e=(yield M.keys()).map(i=>m(this,null,function*(){const l=yield M.getItem(i);l&&this.killMaintenanceRecords.push(l)}));yield Promise.all(e);const a=[...new Set(this.killMaintenanceRecords.map(i=>i.period))];this.availableKillPeriods=a.sort((i,l)=>l.localeCompare(i))}catch(o){console.error("加载杀码组合维护记录失败:",o)}})},loadFiveMaintenanceRecords(){return m(this,null,function*(){try{this.fiveMaintenanceRecords=[];const o=(yield U.getItem("fiveCodeRecords"))||[];this.fiveMaintenanceRecords=o;const e=[...new Set(this.fiveMaintenanceRecords.map(a=>a.period))];this.availableFivePeriods=e.sort((a,i)=>i.localeCompare(a))}catch(o){console.error("加载五胆码组合维护记录失败:",o)}})},loadCodeMaintenanceRecords(){return m(this,null,function*(){try{console.log("开始加载胆码维护记录...");const o=(yield I.getItem("codeRecords"))||[];console.log("从胆码维护存储加载的数据:",o),console.log(`加载了 ${o.length} 条统一胆码维护记录`)}catch(o){console.error("加载统一胆码维护记录失败:",o)}})},onPeriodSelect(){if(this.selectedPeriod){this.period=this.selectedPeriod;const o=this.maintenanceRecords.filter(e=>e.period===this.selectedPeriod).sort((e,a)=>e.priority-a.priority);o.length>0&&(this.fourCodeGroups=[],o.forEach(e=>{this.fourCodeGroups.push({code:e.fourCode})}))}},onKillPeriodSelect(){if(this.selectedKillPeriod){const o=this.killMaintenanceRecords.filter(e=>e.period===this.selectedKillPeriod).sort((e,a)=>e.priority-a.priority);o.length>0&&(this.killCodeGroups=[],o.forEach(e=>{this.killCodeGroups.push({code:e.killCode})}))}},onFivePeriodSelect(){if(this.selectedFivePeriod){const o=this.fiveMaintenanceRecords.filter(e=>e.period===this.selectedFivePeriod).sort((e,a)=>e.priority-a.priority);o.length>0&&(this.fiveCodeGroups=[],o.forEach(e=>{this.fiveCodeGroups.push({code:e.fiveCode})}))}},matchCombinations(){if(!this.period){alert("请输入期号");return}const o=this.fourCodeGroups.filter(a=>a.code.length===4);if(o.length===0){alert("请至少输入一组有效的四码组合（4位数字）");return}const e=this.danmaGroups.filter(a=>a.code.length>0);if(e.length===0){alert("请至少输入一组有效的胆码组合");return}if(this.selectedDanmaTypes.length===0){alert("请至少选择一种胆码类型");return}this.results=[],o.forEach(a=>{const i=a.code,l=this.performDanmaMatching(i,e);this.results.push({period:this.period,fourCode:i,danmaGroups:e.map(n=>n.code).join(","),danmaOccurrences:l.danmaOccurrences,selectedDanma:l.selectedDanma,matchResult:l.matchResult,finalDanma:l.finalDanma})}),this.results.sort((a,i)=>i.period.localeCompare(a.period))},generateThreeCodeCombinations(){if(this.results.length===0){alert("请先进行匹配操作");return}const o=[];if(this.results.forEach(i=>{if(i.finalDanma&&i.finalDanma.length>0){const l=i.finalDanma.split("");o.push(...l)}}),o.length===0){alert("未找到有效的最终胆码数据，无法生成3码组合");return}console.log("收集到的所有最终胆码:",o);const e=[...new Set(o)];if(console.log("去重后的唯一数字:",e),e.length<3){alert(`最终胆码数字不足3个（当前有${e.length}个），无法生成3码组合`);return}const a=this.generateCombinations(e,3);console.log("生成的3码组合数量:",a.length),a.join(", "),this.fullMatchThreeCodeCombinations=a,this.partialMatchThreeCodeCombinations=[],this.showThreeCodeResults=!0,alert(`成功生成 ${a.length} 组3码组合`)},generateFiveCodeCombinations(){if(this.results.length===0){alert("请先进行匹配操作");return}const o=this.results.filter(s=>s.matchResult==="match");if(o.length===0){alert("没有匹配成功的结果，无法生成5码组合");return}const e=this.results.filter(s=>s.matchResult==="not-match"),a=o.map(s=>s.remainingNumbers).join(""),i=[...new Set(a.split(""))];this.fullMatchFiveCodeCombinations=this.generateCombinations(i,5);const l=[...e,...o].map(s=>s.remainingNumbers).join(""),n=[...new Set(l.split(""))];this.partialMatchFiveCodeCombinations=this.generateCombinations(n,5),this.showFiveCodeResults=!0},generateCombinations(o,e){const a=[],i=o.length;return e>i?a:(this.combinationUtil(o,[],0,i-1,0,e,a),[...new Set(a)])},combinationUtil(o,e,a,i,l,n,s){if(l===n){s.push(e.join(""));return}for(let r=a;r<=i&&i-r+1>=n-l;r++)e[l]=o[r],this.combinationUtil(o,e,r+1,i,l+1,n,s)},performDanmaMatching(o,e){const a=o.split(""),i={};a.forEach(p=>{i[p]=0}),e.forEach(p=>{const C=p.code.split("");a.forEach(P=>{C.includes(P)&&i[P]++})});const l=[],n=[];a.forEach(p=>{const C=i[p];C>=3&&(l.push(p),n.push(`${p}(${C})`))});const r=l.sort((p,C)=>i[C]-i[p]).slice(0,2);console.log("四码数字出现次数统计:",i),console.log("精选胆码:",l),console.log("最终胆码:",r);let d;const f=l.length;return f>=5?d="精准匹配":f>=3&&f<5?d="匹配":d="不匹配",{danmaOccurrences:n.join(","),selectedDanma:l.join(""),finalDanma:r.join(""),matchResult:d}},calculateRemainingNumbers(o,e){const a=o.split(""),i=new Set(e.split(""));return a.filter(l=>!i.has(l))},calculateRemainingNumbersWithFiveCode(o,e,a){const i=new Set(o.split("")),l=new Set(e.split("")),n=new Set(a.split(""));return[...i].filter(r=>!l.has(r)&&n.has(r))},saveResults(){return m(this,null,function*(){if(this.results.length===0){alert("暂无结果可保存");return}try{const o={id:Date.now().toString(),period:this.period,fourCodeGroups:this.fourCodeGroups.map(e=>e.code),danmaGroups:this.danmaGroups.map(e=>e.code),selectedDanmaTypes:this.selectedDanmaTypes,results:JSON.parse(JSON.stringify(this.results)),timestamp:Date.now()};yield G.setItem(o.id,o),alert("结果保存成功")}catch(o){console.error("保存结果失败:",o),alert("保存结果失败，请重试")}})},clearResults(){this.results=[]},viewHistory(){return m(this,null,function*(){try{this.historyRecords=[];const e=(yield G.keys()).map(a=>m(this,null,function*(){const i=yield G.getItem(a);i&&this.historyRecords.push(i)}));yield Promise.all(e),this.historyRecords.sort((a,i)=>i.timestamp-a.timestamp),this.showHistoryModal=!0}catch(o){console.error("加载历史记录失败:",o),alert("加载历史记录失败，请重试")}})},closeHistoryModal(){this.showHistoryModal=!1},loadHistoryRecord(o){this.period=o.period,this.fourCodeGroups=o.fourCodeGroups.map(e=>({code:e})),o.killCodeGroups?this.killCodeGroups=o.killCodeGroups.map(e=>({code:e})):this.killCodeGroups=[{code:""}],this.results=o.results,o.danmaGroups&&(this.danmaGroups=o.danmaGroups.map(e=>({code:e}))),o.selectedDanmaTypes&&(this.selectedDanmaTypes=o.selectedDanmaTypes),this.closeHistoryModal()},deleteHistoryRecord(o){return m(this,null,function*(){if(confirm("确定要删除这条历史记录吗？"))try{yield G.removeItem(o),this.historyRecords=this.historyRecords.filter(e=>e.id!==o)}catch(e){console.error("删除历史记录失败:",e),alert("删除历史记录失败，请重试")}})},generateFinalResults(){if(this.results.length===0){alert("暂无匹配结果，请先进行匹配");return}const o=[];if(this.results.forEach(n=>{n.danmaOccurrences&&n.danmaOccurrences.split(",").forEach(r=>{const d=r.match(/(\d+)\((\d+)\)/);if(d){const f=d[1],p=parseInt(d[2]);o.push({digit:f,count:p})}})}),o.length===0){alert("未找到有效的胆码出现次数数据");return}const e=[...new Set(o.map(n=>n.count))],i=e.sort((n,s)=>s-n).slice(0,2),l=[];o.forEach(n=>{i.includes(n.count)&&l.findIndex(r=>r.digit===n.digit)===-1&&l.push({digit:n.digit,count:n.count})}),l.sort((n,s)=>s.count!==n.count?s.count-n.count:n.digit.localeCompare(s.digit)),this.finalResult=l.map(n=>`${n.digit}(${n.count})`).join(","),console.log("所有胆码出现次数:",o),console.log("不重复次数值:",e),console.log("前两名次数:",i),console.log("最终胆码:",this.finalResult)},formatFinalResult(o){return o?o.split(",").map(e=>{const a=e.match(/(\d+)\((\d+)\)/);if(a){const i=a[1],l=a[2];return`<span class="final-danma-digit" style="color: #dc3545 !important;">${i}</span><span class="final-danma-count" style="color:#22211f !important;font-size: 15px;vertical-align: middle;">(${l})</span>`}return e}).join(","):""},saveFinalResult(){return m(this,null,function*(){if(!this.finalResult){alert("请先生成最终结果");return}try{const o={id:"final-result-"+Date.now().toString(),period:this.period,finalDanma:this.finalResult,timestamp:Date.now(),sourceResults:JSON.parse(JSON.stringify(this.results))};yield G.setItem(o.id,o),alert("最终结果保存成功")}catch(o){console.error("保存最终结果失败:",o),alert("保存最终结果失败，请重试")}})}}},H={class:"number-extraction"},E={class:"panel"},O={class:"form-group"},j={class:"period-input-group"},V=["value"],q={class:"form-section"},J={class:"checkbox-group"},A=["value"],B={class:"form-section"},L={class:"section-header"},W=["onUpdate:modelValue","onInput"],Q=["onClick"],X={class:"form-section"},Y={class:"section-header"},Z=["onUpdate:modelValue","onInput"],z=["onClick"],$={key:0,class:"results-panel"},ee={class:"results-summary"},oe={class:"summary-item"},se={class:"summary-value match"},te={class:"summary-item"},ie={class:"summary-value match"},le={class:"summary-item"},ne={class:"summary-value not-match"},ae={class:"results-table-container"},re={class:"results-table"},de={class:"results-actions"},ce={key:0,class:"final-result-section"},ue={class:"final-result-content"},he=["innerHTML"],me={key:1,class:"three-code-results"},pe={class:"three-code-result-section"},fe={class:"three-code-list"},Ce={class:"three-code-stats"},ve={key:2,class:"five-code-results"},be={class:"five-code-result-section"},ge={class:"five-code-list"},ye={class:"five-code-stats"},Re={class:"five-code-result-section"},Ge={class:"five-code-list"},ke={class:"five-code-stats"},Pe={class:"modal-header"},De={class:"modal-body"},we={key:0,class:"history-list"},Me={class:"history-header"},Fe={class:"history-period"},Ie={class:"history-date"},Se=["onClick"],_e=["onClick"],Te={key:1,class:"no-records"};function Ne(o,e,a,i,l,n){return h(),c("div",H,[t("div",E,[e[22]||(e[22]=t("h2",null,"根据胆码匹配四码组合",-1)),t("div",O,[e[18]||(e[18]=t("label",{for:"period"},"期号",-1)),t("div",j,[R(t("input",{id:"period","onUpdate:modelValue":e[0]||(e[0]=s=>l.period=s),type:"text",placeholder:"请输入期号",class:"input-field"},null,512),[[k,l.period]]),R(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>l.selectedCombinedPeriod=s),onChange:e[2]||(e[2]=(...s)=>n.onCombinedPeriodSelect&&n.onCombinedPeriodSelect(...s)),class:"select-field"},[e[17]||(e[17]=t("option",{value:""},"从维护中选择期号 (统一选择)",-1)),(h(!0),c(v,null,b(l.availableCombinedPeriods,s=>(h(),c("option",{key:s,value:s},u(s),9,V))),128))],544),[[S,l.selectedCombinedPeriod]])])]),t("div",q,[e[19]||(e[19]=t("div",{class:"section-header"},[t("h3",null,"胆码类型")],-1)),t("div",J,[(h(!0),c(v,null,b(l.danmaTypes,s=>(h(),c("label",{key:s.value,class:"checkbox-item"},[R(t("input",{type:"checkbox",value:s.value,"onUpdate:modelValue":e[3]||(e[3]=r=>l.selectedDanmaTypes=r)},null,8,A),[[N,l.selectedDanmaTypes]]),T(" "+u(s.label),1)]))),128))])]),t("div",B,[t("div",L,[e[20]||(e[20]=t("h3",null,"胆码组合",-1)),t("button",{onClick:e[4]||(e[4]=(...s)=>n.addDanmaGroup&&n.addDanmaGroup(...s)),class:"btn-add"},"+ 添加胆码")]),(h(!0),c(v,null,b(l.danmaGroups,(s,r)=>(h(),c("div",{key:r,class:"code-group"},[R(t("input",{"onUpdate:modelValue":d=>s.code=d,type:"text",placeholder:"请输入胆码数字",onInput:d=>n.validateDanmaInput(s),class:"input-field code-input"},null,40,W),[[k,s.code]]),t("button",{onClick:d=>n.removeDanmaGroup(r),class:"btn-remove"},"×",8,Q)]))),128))]),t("div",X,[t("div",Y,[e[21]||(e[21]=t("h3",null,"四码组合",-1)),t("button",{onClick:e[5]||(e[5]=(...s)=>n.addFourCodeGroup&&n.addFourCodeGroup(...s)),class:"btn-add"},"+ 添加组合")]),(h(!0),c(v,null,b(l.fourCodeGroups,(s,r)=>(h(),c("div",{key:r,class:"code-group"},[R(t("input",{"onUpdate:modelValue":d=>s.code=d,type:"text",placeholder:"请输入4位数字",maxlength:"4",onInput:d=>n.validateFourCodeInput(s),class:"input-field code-input"},null,40,Z),[[k,s.code]]),t("button",{onClick:d=>n.removeFourCodeGroup(r),class:"btn-remove"},"×",8,z)]))),128))]),t("button",{onClick:e[6]||(e[6]=(...s)=>n.matchCombinations&&n.matchCombinations(...s)),class:"btn-primary btn-match"},"开始匹配")]),l.results.length>0?(h(),c("div",$,[e[31]||(e[31]=t("h3",null,"匹配结果",-1)),t("div",ee,[t("div",oe,[e[23]||(e[23]=t("span",{class:"summary-label"},"精准匹配数:",-1)),t("span",se,u(l.results.filter(s=>s.matchResult==="精准匹配").length),1)]),t("div",te,[e[24]||(e[24]=t("span",{class:"summary-label"},"匹配数:",-1)),t("span",ie,u(l.results.filter(s=>s.matchResult==="匹配").length),1)]),t("div",le,[e[25]||(e[25]=t("span",{class:"summary-label"},"不匹配数:",-1)),t("span",ne,u(l.results.filter(s=>s.matchResult==="不匹配").length),1)])]),t("div",ae,[t("table",re,[e[26]||(e[26]=t("thead",null,[t("tr",null,[t("th",null,"期号"),t("th",null,"四码组合"),t("th",null,"多个胆码组合"),t("th",null,"胆码出现次数"),t("th",null,"精选胆码"),t("th",null,"最终胆码"),t("th",null,"匹配结果")])],-1)),t("tbody",null,[(h(!0),c(v,null,b(l.results,(s,r)=>(h(),c("tr",{key:r,class:D(s.matchResult)},[t("td",null,u(s.period),1),t("td",null,u(s.fourCode),1),t("td",null,u(s.danmaGroups),1),t("td",null,u(s.danmaOccurrences),1),t("td",null,u(s.selectedDanma),1),t("td",null,u(s.finalDanma),1),t("td",null,[t("span",{class:D(["result-badge",s.matchResult])},u(s.matchResult==="精准匹配"?"✅ 精准匹配":s.matchResult==="匹配"?"✅ 匹配":"❌ 不匹配"),3)])],2))),128))])])]),t("div",de,[t("button",{onClick:e[7]||(e[7]=(...s)=>n.saveResults&&n.saveResults(...s)),class:"btn-secondary"},"保存结果"),t("button",{onClick:e[8]||(e[8]=(...s)=>n.clearResults&&n.clearResults(...s)),class:"btn-secondary"},"清除结果"),t("button",{onClick:e[9]||(e[9]=(...s)=>n.viewHistory&&n.viewHistory(...s)),class:"btn-secondary"},"查看历史"),t("button",{onClick:e[10]||(e[10]=(...s)=>n.generateThreeCodeCombinations&&n.generateThreeCodeCombinations(...s)),class:"btn-secondary"},"生成3码组合"),t("button",{onClick:e[11]||(e[11]=(...s)=>n.generateFiveCodeCombinations&&n.generateFiveCodeCombinations(...s)),class:"btn-secondary"},"生成5码组合"),t("button",{onClick:e[12]||(e[12]=(...s)=>n.generateFinalResults&&n.generateFinalResults(...s)),class:"btn-primary"},"生成最终结果")]),l.finalResult?(h(),c("div",ce,[e[27]||(e[27]=t("h4",null,"最终胆码结果",-1)),t("div",ue,[t("span",{class:"final-result-text",innerHTML:n.formatFinalResult(l.finalResult)},null,8,he),t("button",{onClick:e[13]||(e[13]=(...s)=>n.saveFinalResult&&n.saveFinalResult(...s)),class:"btn-secondary"},"保存最终结果")])])):y("",!0),l.showThreeCodeResults?(h(),c("div",me,[t("div",pe,[e[28]||(e[28]=t("h4",null,"基于最终胆码生成的3码组合",-1)),t("div",fe,u(l.fullMatchThreeCodeCombinations.join(", ")),1),t("div",Ce,[t("span",null,"共生成 "+u(l.fullMatchThreeCodeCombinations.length)+" 组3码组合",1)])])])):y("",!0),l.showFiveCodeResults?(h(),c("div",ve,[t("div",be,[e[29]||(e[29]=t("h4",null,"完全匹配结果",-1)),t("div",ge,u(l.fullMatchFiveCodeCombinations.join(", ")),1),t("div",ye,[t("span",null,"共生成 "+u(l.fullMatchFiveCodeCombinations.length)+" 组5码组合",1)])]),t("div",Re,[e[30]||(e[30]=t("h4",null,"不完全匹配结果",-1)),t("div",Ge,u(l.partialMatchFiveCodeCombinations.join(", ")),1),t("div",ke,[t("span",null,"共生成 "+u(l.partialMatchFiveCodeCombinations.length)+" 组5码组合",1)])])])):y("",!0)])):y("",!0),l.showHistoryModal?(h(),c("div",{key:1,class:"modal-overlay",onClick:e[16]||(e[16]=(...s)=>n.closeHistoryModal&&n.closeHistoryModal(...s))},[t("div",{class:"modal-content",onClick:e[15]||(e[15]=_(()=>{},["stop"]))},[t("div",Pe,[e[32]||(e[32]=t("h3",null,"历史记录",-1)),t("button",{onClick:e[14]||(e[14]=(...s)=>n.closeHistoryModal&&n.closeHistoryModal(...s)),class:"modal-close"},"×")]),t("div",De,[l.historyRecords.length>0?(h(),c("div",we,[(h(!0),c(v,null,b(l.historyRecords,s=>(h(),c("div",{key:s.id,class:"history-item"},[t("div",Me,[t("span",Fe,"期号: "+u(s.period),1),t("span",Ie,u(new Date(s.timestamp).toLocaleString()),1)]),t("button",{onClick:r=>n.loadHistoryRecord(s),class:"btn-load"},"加载此记录",8,Se),t("button",{onClick:r=>n.deleteHistoryRecord(s.id),class:"btn-delete"},"删除",8,_e)]))),128))])):(h(),c("div",Te,"暂无历史记录"))])])])):y("",!0)])}const Ee=K(x,[["render",Ne],["__scopeId","data-v-20928f6b"]]);export{Ee as default};
