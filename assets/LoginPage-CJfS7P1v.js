var x=(g,s,i)=>new Promise((o,r)=>{var l=t=>{try{u(i.next(t))}catch(p){r(p)}},a=t=>{try{u(i.throw(t))}catch(p){r(p)}},u=t=>t.done?o(t.value):Promise.resolve(t.value).then(l,a);u((i=i.apply(g,s)).next())});import{c as d,a as e,b as v,k as F,w as P,f as b,l as w,v as E,n as m,t as f,m as R,p as S,q as k,s as y,u as h,x as C,o as c}from"./vendor-XXQc_yx5.js";import{_ as D,a as M}from"./index-BiK889hT.js";import"./utils-DurHG9wo.js";const N={name:"LoginPage",setup(){const g=C(),s=k(!1),i=k(!1),o=k(!1),r=y({username:"",password:"",rememberMe:!0}),l=y({username:"",password:""}),a=y({success:!1,message:""}),u=()=>{s.value=window.innerWidth<=768},t=()=>{let n=!0;return l.username="",l.password="",r.username.trim()||(l.username="è¯·è¾“å…¥è´¦å·",n=!1),r.password?r.password.length<6&&(l.password="å¯†ç é•¿åº¦è‡³å°‘6ä½",n=!1):(l.password="è¯·è¾“å…¥å¯†ç ",n=!1),n},p=n=>{l[n]="",a.message=""},L=()=>{i.value=!i.value},V=()=>x(this,null,function*(){if(t()){o.value=!0,a.message="";try{const n=yield M.login(r.username,r.password,r.rememberMe);n.success?(a.success=!0,a.message="ç™»å½•æˆåŠŸï¼æ­£åœ¨è·³è½¬...",window.dispatchEvent(new CustomEvent("userLoginSuccess")),setTimeout(()=>{g.push("/")},1500)):(a.success=!1,a.message=n.error||"ç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•")}catch(n){a.success=!1,a.message="ç™»å½•å¼‚å¸¸ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥",console.error("ç™»å½•å¼‚å¸¸:",n)}finally{o.value=!1}}});return h(()=>{u(),window.addEventListener("resize",u),M.checkLoginStatus()&&g.push("/")}),{isMobile:s,showPassword:i,isLoading:o,loginForm:r,errors:l,loginResult:a,clearError:p,togglePasswordVisibility:L,handleLogin:V}}},B={class:"input-group"},T={class:"input-wrapper"},U={key:0,class:"error-message"},z={class:"input-group"},q={class:"input-wrapper"},I=["type"],W={class:"toggle-icon"},_={key:0,class:"error-message"},j={class:"remember-group"},A={class:"checkbox-label"},G=["disabled"],H={key:0,class:"button-text"},J={key:1,class:"loading-text"},K={key:0,class:"mobile-bottom-decoration"};function O(g,s,i,o,r,l){return c(),d("div",{class:m(["login-container",{"mobile-login":o.isMobile}])},[s[18]||(s[18]=e("div",{class:"login-background"},[e("div",{class:"bg-blur-1"}),e("div",{class:"bg-blur-2"}),e("div",{class:"bg-blur-3"})],-1)),e("div",{class:m(["login-card",{"mobile-card":o.isMobile}])},[s[15]||(s[15]=F('<div class="app-header" data-v-c8101daf><div class="app-icon" data-v-c8101daf><span class="icon" data-v-c8101daf>ğŸ¯</span></div><h1 class="app-title" data-v-c8101daf>æ•°å­—é¢„æµ‹ç³»ç»Ÿ</h1><p class="app-subtitle" data-v-c8101daf>å®‰å…¨ç™»å½•è®¿é—®</p></div>',1)),e("form",{class:"login-form",onSubmit:s[6]||(s[6]=P((...a)=>o.handleLogin&&o.handleLogin(...a),["prevent"]))},[e("div",B,[s[8]||(s[8]=e("label",{for:"username",class:"input-label"},[e("span",{class:"label-icon"},"ğŸ‘¤"),b(" è´¦å· ")],-1)),e("div",T,[w(e("input",{id:"username","onUpdate:modelValue":s[0]||(s[0]=a=>o.loginForm.username=a),type:"text",class:m(["form-input",{"input-error":o.errors.username}]),placeholder:"è¯·è¾“å…¥è´¦å·",onFocus:s[1]||(s[1]=a=>o.clearError("username"))},null,34),[[E,o.loginForm.username]]),s[7]||(s[7]=e("div",{class:"input-underline"},null,-1))]),o.errors.username?(c(),d("div",U,f(o.errors.username),1)):v("",!0)]),e("div",z,[s[10]||(s[10]=e("label",{for:"password",class:"input-label"},[e("span",{class:"label-icon"},"ğŸ”’"),b(" å¯†ç  ")],-1)),e("div",q,[w(e("input",{id:"password","onUpdate:modelValue":s[2]||(s[2]=a=>o.loginForm.password=a),type:o.showPassword?"text":"password",class:m(["form-input",{"input-error":o.errors.password}]),placeholder:"è¯·è¾“å…¥å¯†ç ",onFocus:s[3]||(s[3]=a=>o.clearError("password"))},null,42,I),[[R,o.loginForm.password]]),e("button",{type:"button",class:"password-toggle",onClick:s[4]||(s[4]=(...a)=>o.togglePasswordVisibility&&o.togglePasswordVisibility(...a))},[e("span",W,f(o.showPassword?"ğŸ™ˆ":"ğŸ‘ï¸"),1)]),s[9]||(s[9]=e("div",{class:"input-underline"},null,-1))]),o.errors.password?(c(),d("div",_,f(o.errors.password),1)):v("",!0)]),e("div",j,[e("label",A,[w(e("input",{"onUpdate:modelValue":s[5]||(s[5]=a=>o.loginForm.rememberMe=a),type:"checkbox",class:"checkbox-input"},null,512),[[S,o.loginForm.rememberMe]]),s[11]||(s[11]=e("span",{class:"checkbox-custom"},null,-1)),s[12]||(s[12]=e("span",{class:"checkbox-text"},"7å¤©å†…å…ç™»å½•",-1))])]),e("button",{type:"submit",class:m(["login-button",{loading:o.isLoading,"mobile-button":o.isMobile}]),disabled:o.isLoading},[o.isLoading?(c(),d("span",J,[...s[14]||(s[14]=[e("span",{class:"loading-spinner"},null,-1),b(" ç™»å½•ä¸­... ",-1)])])):(c(),d("span",H,[...s[13]||(s[13]=[e("span",{class:"button-icon"},"ğŸš€",-1),b(" ç™»å½•ç³»ç»Ÿ ",-1)])]))],10,G),o.loginResult.message?(c(),d("div",{key:0,class:m(["login-feedback",{success:o.loginResult.success,error:!o.loginResult.success}])},f(o.loginResult.message),3)):v("",!0)],32),s[16]||(s[16]=e("div",{class:"login-footer"},[e("p",{class:"footer-text"},[e("span",{class:"footer-icon"},"ğŸ”"),b(" å®‰å…¨è®¤è¯ç³»ç»Ÿ - ä»…ä¾›æˆæƒç”¨æˆ·ä½¿ç”¨ ")])],-1))],2),o.isMobile?(c(),d("div",K,[...s[17]||(s[17]=[e("div",{class:"decoration-wave"},null,-1)])])):v("",!0)],2)}const $=D(N,[["render",O],["__scopeId","data-v-c8101daf"]]);export{$ as default};
